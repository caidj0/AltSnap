CC=clang
WR=windres

LDFLAGS= \
	-lmsvcrt\
	-lkernel32 \
	-luser32 \
	-lgdi32 \
	-lwinmm

EXELD = $(LDFLAGS) \
	-lcomctl32 \
	-ladvapi32 \
	-lshell32

default: AltSnap.exe hooks.dll

hooks.dll : hooks.c hooks.h hooksr.o unfuck.h nanolibc.h zones.c snap.c
	$(CC) -o hooks.dll hooks.c hooksr.o $(LDFLAGS) -mdll

AltSnap.exe : altsnapr.o altsnap.c hooks.h tray.c config.c languages.h languages.c unfuck.h nanolibc.h
	$(CC) -o AltSnap.exe altsnap.c altsnapr.o $(EXELD) -mwindows -nostdlib -e unfuckWinMain

altsnapr.o : altsnap.rc window.rc resource.h AltSnap.exe.manifest media/find.cur media/find.ico media/icon.ico media/tray-disabled.ico media/tray-enabled.ico
	$(WR) altsnap.rc altsnapr.o

hooksr.o: hooks.rc
	$(WR) hooks.rc hooksr.o

clean :
	rm altsnapr.o AltSnap.exe hooksr.o hooks.dll
